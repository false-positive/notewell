{% extends 'notes/base.html' %}

{% load markdownify %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'notes/css/comment_list.css' %}" />
{% endblock head %} 

{% block content %}
<h1 class="title">{{ note.title }}</h1>

<h2 class="title-2">By {{ note.author.username }}</h2>
<!-- TODO: Add link to user -->

<a href="{% url 'notes:edit' note.uuid %}">edit</a>

<div class="note-content">
    {{'Some *test* [link](#)'|markdownify }}

    <br>
    {% autoescape off %}
    {{ note.content|markdownify|safe }}
    {% endautoescape %}
</div>


<h3 class="title">Comments:</h3>

{% if user.is_authenticated %}
    <form action="" method="POST" class="create-comment-form">
        {% csrf_token %}
        
        <!-- TODO make textarea auto-resize -->

        {{ create_comment_form.content }}

        <button class="submit" type="submit">Post Comment</button>

    </form>

        <!-- <div class="input-field username">
            <label class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-leading-icon">
                <span class="mdc-notched-outline">
                    <span class="mdc-notched-outline__leading"></span>
                    <span class="mdc-notched-outline__notch">
                        <span class="mdc-floating-label" id="my-label-id"> Username</span>
                    </span>
                    <span class="mdc-notched-outline__trailing"></span>
                </span>
                <i class="material-icons mdc-text-field__icon mdc-text-field__icon--leading" tabindex="0" role="button">person</i>
                {{ form.content }}
            </label>
            <div class="mdc-text-field-helper-line">
                <div class="mdc-text-field-helper-text" id="my-helper-id" aria-hidden="true">*Required</div>
            </div>
        </div> -->
        <!-- <ul>
            {{ create_comment_form.as_ul }}
        </ul> -->
        <!-- <button>Post Comment</button> -->
{% endif %}


{% for comment in comments %}
    {% include 'notes/components/comment.html' with comment=comment %}
{% endfor %}

<script src="{% static 'notes/js/comment_form.js' %}"></script>

{% endblock content %}
